  
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../Libs/jquery-ui-1.11.4/jquery-ui.css" rel="stylesheet">
<link rel="stylesheet" href="../Libs/bootstrap/css/bootstrap.min.css">
<script src="../Libs/jquery/jquery-1.12.3.min.js"></script>
<script src="../Libs/bootstrap/js/bootstrap.min.js"></script>
<script src="../Libs/jquery-ui-1.11.4/jquery-ui.js"></script>
<style type="text/css">
  tr {
    width: 100%;
    display: inline-table;
  }

  table{
   height:300px; 
   table-layout: fixed;
   /*border: 1px solid black;*/
 }
 tbody{
  overflow-y: scroll;
  height: 450px;
  /*width: 100%;*/
  position: absolute;
}
td, th {
 border: 1px solid black;
 width: 80px;
 text-align: center;
}
</style>
<?php include 'readData.php';?>
<div class="row content" style=" width:900px">
  <div class="col-sm-9 ">
    <p id=showTable ></p>
  </div>
  <div class="col-sm-3 ">
    <br>
    <button id="addColumnButton" value="Open Dialog" class="btn btn-success" style="height:30px;width:100px" >Add Column</button><br><br>
    <button class="btn btn-success" style="height:30px;width:100px"  onclick="deleteConfirmFunction()">Delete</button>
  </div>
</div>
<div id="dialog">
  <form>
    <p>
      <label for="nameOfNewColumn">Name:</label>
      <input id="nameOfNewColumn" type="text">
    </p>
    <p>
      <label> Equalition:</label><br>
      <textarea id="equalition" rows="2" cols="60" placeholder="Enter equalition"></textarea>
    </p>
    <label> Description:</label><br>
    <textarea id="description" rows="2" cols="60" placeholder="Enter description"></textarea>
    <br><label> Note:
    <pre>
      - d(x): Derivative of x
      - l(x): Integral of x
      - const(A): Constant name A, 
      which can be changed while drawing
      - operation: + (add), -(sub), *(mul), / (div)
    </pre>
  </label>
</form>
</div>
<script type="text/javascript">

  $("#dialog").dialog({
    autoOpen: false,
    width: 500,
    height: 450,
    // modal: true,
    title: "Add Column",
    dialogClass: "dlg-no-close",
    position: {
      my: "right",
      at: "center"
    },
    buttons: { 
      Ok: function() {
        $(this).dialog("close");
      },
      Cancel: function () {
        $(this).dialog("close");
      }
    }
  });

  var selectCoulumnIndex = -1;
  $(document).ready(function() {
    $('#dataTableID th').each(function(index) {
      $(this).click(function() {
        selectCoulumnIndex = index;
      });
    });
  });

  $("#addColumnButton").click(function () {
    $("#dialog").dialog("open");
  });

  function deleteConfirmFunction() {
    if(selectCoulumnIndex > 0)
    var r = confirm("Are you sure you want to delete " + parent.tableLable[selectCoulumnIndex - 1] + " column");
    if (r == true) {
        deleteSelectColumn(selectCoulumnIndex);
    } else {
      txt = "You pressed Cancel!";
    }
    selectCoulumnIndex = -1;
        $('#dataTableID th').each(function(index) {
      $(this).click(function() {
        selectCoulumnIndex = index;
      });
    });
  }

  function deleteSelectColumn (index){
    parent.tableLable.splice(index-1, 1);
    parent.matrix.splice(index-1,1);
    var selectRow;
    for(var i = 0; i <= parent.totalValueRow; i++)
    {
      selectRow = document.getElementById("dataTableID").rows[i];
      selectRow.deleteCell(index);
    }
    parent.totalSensorAvailable--;
  }
// load data from global variable
    var myTable= "<table  id =\"dataTableID\" class=\"table table-striped table-hover\"><tr><th style='color: red;'>Time</th>";
    for (var i=0; i<parent.totalSensorAvailable; i++) {
      parent.tableLable[i] = parent.sensorName[parent.sensorID[i]];
      myTable+= "<th style='color: red;'>" + parent.tableLable[i] +"</th>";
    } 
    myTable +="</tr>";

    for (var j=0; j<parent.totalValueRow; j++) {
      myTable+="<tr id=\""+parent.recordId[j] +"\">";
      myTable+="<td>" +parent.recordId[j] + "</td>";
      for (i=0; i<parent.totalSensorAvailable; i++) {
        myTable+="<td>" + parent.matrix[i][j] + "</td>";
      }
      myTable+="</tr>";
    }  
    myTable+="</table>";
    document.getElementById("showTable").innerHTML = myTable;
</script>